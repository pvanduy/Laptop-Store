var Tawk_API=Tawk_API||{},Tawk_LoadStart=new Date,EzCa_API=EzCa_API||function(){function wt(n,t,i,r){var u=new XMLHttpRequest;u.open(t,n);t==="POST"&&u.setRequestHeader("Content-Type","application/json;charset=UTF-8");i?u.send(JSON.stringify(i)):u.send();u.responseType="json";u.onload=function(){typeof r=="function"&&r(this.response)};u.onerror=function(){}}function hi(n,t){wt(n,"GET",null,t)}function ci(n,t){return n=Math.ceil(n),t=Math.floor(t),Math.floor(Math.random()*(t-n)+n)}function bt(){return Math.floor(Date.now()/1e3)}function it(){var n=bt();return`${n}${ci(1e5,999999)}`}function k(){var r=document.getElementById("ezcaScript"),t,i;if(r)n.scriptSrc=r.src;else{t=document.getElementsByTagName("script");for(i in t)t[i].src&&t[i].src.includes("cdn.ezca.asia/js/sdk.js?id=")&&(n.scriptSrc=t[i].src)}return f("id",n.scriptSrc)}function e(){var t=l(n.ezcaKey);return t&&t.length==16?n.newVisitor||(n.newVisitor=0):(t=it(),n.firstView=1,n.newVisitor=1),r.setItem(n.newVisitorKey,n.newVisitor),g(n.ezcaKey,t,730),t}function rt(){var t=r.getItem(n.sidKey);return t||(t=h(8),r.setItem(n.sidKey,t)),t}function li(n){var t=["_t="+(new Date).getTime()];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")}function f(n,t){try{var t=new URL(t?t:document.location.toString()),i=t.searchParams.get(n);return i?i:""}catch(r){return console.log("Error GetParam",r),""}}function kt(t,i){var u=0;i?(u=r.getItem(t),u||(u=0)):r.setItem(t,u);setInterval(function(){l(n.actKey)?u++:u=0;r.setItem(t,u);a(t==n.tipKey?"timeOnPage":"timeOnSession",u)},1e3)}function ai(n){var t=r.getItem(n);t||(t=0);t++;r.setItem(n,t);a("pageview",t)}function ut(t){if(!isNaN(t)){n.pId=t;var i=dt();i.includes(t)||i.splice(0,0,parseInt(t));pt.setItem(n.recentIdsKey,JSON.stringify(i))}}function dt(){var t=pt.getItem(n.recentIdsKey);return t=t?JSON.parse(t):[],t.slice(0,5)}function vi(){var u,e,o,t,i;if(!n.preview&&(n.productViewLog=null,n.isECommerce))if(n.isWooCommerce){if(u=document.querySelector("link[rel=shortlink]"),!u){r.setItem(n.pvidKey,document.location.pathname);return}if(t=f("p",u.href),!t){r.setItem(n.pvidKey,document.location.pathname);return}if(n.currentPId=t,i=r.getItem(n.pvidKey),i==t)return;e=document.querySelector("form.variations_form.cart");e&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},ut(t));r.setItem(n.pvidKey,t)}else if(n.isHaravan){if(y()!=="product"){o=window.meta?window.meta.page.resourceId:document.location.pathname;r.setItem(n.pvidKey,o);return}function i(t){n.currentPId=t;var i=r.getItem(n.pvidKey);i!=t&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},ut(t),r.setItem(n.pvidKey,t))}t=window.meta?window.meta.product.id:"";t?i(t):Haravan.getProduct(document.location.pathname.replace("/products/",""),function(n){console.log("Init meta2 success");window.meta={page:{pageType:"product",resourceType:"product",resourceId:n.id},product:n};t=n.id;i(t)})}else if(n.isSapo){if(Bizweb.template!="product"){r.setItem(n.pvidKey,document.location.pathname);return}if(t=window.meta.product.id,n.currentPId=t,i=r.getItem(n.pvidKey),i==t)return;Bizweb.template.includes("product")&&(n.productViewLog={webId:n.wid,prevId:i,nextId:t},ut(t));r.setItem(n.pvidKey,t)}}function ft(){var u=JSON.parse(r.getItem("__ezca_utm")),i=document.referrer?new URL(document.referrer).hostname:"",t;return new URL(document.location).hostname==i&&(i=""),t={dl:encodeURIComponent(document.location.toString()),dt:encodeURIComponent(document.title),dp:encodeURIComponent(document.location.pathname),dh:encodeURIComponent(document.location.hostname),w:window.screen.width,h:window.screen.height,fi:n.newVisitor,sid:rt(),uid:e(),wid:n.wid,tip:r.getItem(n.tipKey),tis:r.getItem(n.tisKey),pis:r.getItem(n.pisKey),dr:i,cn:f("utm_campaign"),cs:f("utm_source"),cc:f("utm_content"),ck:f("utm_term"),cm:f("utm_medium"),gclid:f("gclid")},t.tip=t.tip?t.tip:0,t.tis=t.tis?t.tis:0,t.pis=t.pis?t.pis:0,t}function g(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+";"+u+";path=/"}function l(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function ot(n){n=n.replace(/-/g,"+").replace(/_/g,"/");var t=decodeURIComponent(atob(n).split("").map(function(n){return"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(t)}function yi(n){var t=btoa(JSON.stringify(n));return t=t.replace(/=+$/,""),t=t.replace(/\+/g,"-"),t.replace(/\//g,"_")}function wi(t){et("https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.min.js","socket-io").then(()=>{var f={dh:window.location.hostname,wid:n.wid,uid:e(),pid:t},s=yi(f);u=io(n.wssUrl,{upgrade:!1,transports:["websocket"],query:`token=${s}`,reconnectionAttempts:3});let i=[];typeof rrwebRecord=="function";w.sendEvent=function(t){try{var f;if(t==="ping"){if(l(n.actKey))u.disconnected&&u.connect();else{rt()&&r.removeItem(n.sidKey);u.connected&&u.close();return}f={wid:n.wid,uid:e(),id:rt(),dur:10,evt:JSON.stringify(i)};i=[]}else t==="pageview"&&(f=ft(),f.nev=f.fi,n.productViewLog&&(n.productViewLog.prevId+="",n.productViewLog.nextId+="",f.pvl=n.productViewLog,f.pid=n.pId));f.t=t;u.emit("event",f)}catch(o){console.error(o)}};u.on("connect",()=>{if(n.connectCount!=0){var t=ft();t.t="reconnect";u.emit("event",t)}n.connectCount++});u.on("disconnect",()=>{});u.on("message",n=>{o.isProd()||console.log("message",n)});u.on(window.location.hostname,()=>{});if(t>0)u.on(t,n=>{fr(n.count)});w.sendEvent("pageview")}).catch(()=>console.error("Something went wrong."))}function t(n,t){return n+":"+t+"!important;"}function gt(n,t){var i=document.createElement("style");i.id="ezca-"+(t?t:h(8));i.innerHTML=n;document.head.appendChild(i)}function bi(n){var t=n.identity.replace("tawk.to/chat","embed.tawk.to");Tawk_API.onChatMaximized=function(){console.log("onChatMaximized");s("EzCa TawkTo","TawkTo Click")};Tawk_API.onChatStarted=function(){console.log("onChatStarted");s("EzCa TawkTo","TawkTo ChatStarted")};Tawk_API.onChatEnded=function(){console.log("onChatEnded");s("EzCa TawkTo","TawkTo ChatEnded")};Tawk_API.onPrechatSubmit=function(n){console.log("onPrechatSubmit",n);s("EzCa TawkTo","TawkTo PrechatSubmit")};Tawk_API.onOfflineSubmit=function(n){console.log("onOfflineSubmit",n);s("EzCa TawkTo","TawkTo OfflineSubmit")};st(document,"script","ezca-tawkto-sdk",t);console.log("initTawkTo success")}function ki(i){var r=document.getElementById("ezca-btn-fb"),f,u;r||(r=document.createElement("div"),r.id="ezca-btn-fb",f=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","6px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t("right",n.mobile?"20px":"24px")+t("z-index",tt)+t("background","#0A7CFF")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",r.style=f,document.body.appendChild(r),u=document.createElement("style"),u.id="ezca-"+h(8),u.innerHTML="#ezca-btn-fb svg path:nth-child(1){fill:#fff!important} #ezca-btn-fb svg path:nth-child(2){fill:#0A7CFF!important}",document.head.appendChild(u),r.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M24,4C13.5,4,5,12.1,5,22c0,5.2,2.3,9.8,6,13.1V44l7.8-4.7c1.6,0.4,3.4,0.7,5.2,0.7c10.5,0,19-8.1,19-18C43,12.1,34.5,4,24,4z"><\/path><path d="M12 28L22 17 27 22 36 17 26 28 21 23z"><\/path><\/svg>',c(r,"click",()=>{var n="https://m.me/"+i.identity.replace("https://m.me/","")+"?ref="+e();window.open(n);s("EzCa Facebook","Facebook Click")}));return}function di(i,r){var u=document.getElementById("ezca-btn-zalo"),o,f;u||(u=document.createElement("div"),u.id="ezca-btn-zalo",o=t("width","60px")+t("height","60px")+t("border-radius","50%")+t("padding","8px")+t("cursor","pointer")+t("position","fixed")+t("bottom",n.mobile?"20px":"24px")+t(r?"left":"right",n.mobile?"20px":"24px")+t("z-index",tt)+t("background","#0573ff")+t("box-shadow","rgb(0 0 0 / 15%) 0px 4px 12px 0px")+"",u.style=o,document.body.appendChild(u),f=document.createElement("style"),f.id="ezca-"+h(8),f.innerHTML="#ezca-btn-zalo svg path{fill:#fff!important}",document.head.appendChild(f),u.innerHTML+='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M 9 4 C 6.2504839 4 4 6.2504839 4 9 L 4 41 C 4 43.749516 6.2504839 46 9 46 L 41 46 C 43.749516 46 46 43.749516 46 41 L 46 9 C 46 6.2504839 43.749516 4 41 4 L 9 4 z M 9 6 L 15.580078 6 C 12.00899 9.7156859 10 14.518083 10 19.5 C 10 24.66 12.110156 29.599844 15.910156 33.339844 C 16.030156 33.549844 16.129922 34.579531 15.669922 35.769531 C 15.379922 36.519531 14.799687 37.499141 13.679688 37.869141 C 13.249688 38.009141 12.97 38.430859 13 38.880859 C 13.03 39.330859 13.360781 39.710781 13.800781 39.800781 C 16.670781 40.370781 18.529297 39.510078 20.029297 38.830078 C 21.379297 38.210078 22.270625 37.789609 23.640625 38.349609 C 26.440625 39.439609 29.42 40 32.5 40 C 36.593685 40 40.531459 39.000731 44 37.113281 L 44 41 C 44 42.668484 42.668484 44 41 44 L 9 44 C 7.3315161 44 6 42.668484 6 41 L 6 9 C 6 7.3315161 7.3315161 6 9 6 z M 33 15 C 33.55 15 34 15.45 34 16 L 34 25 C 34 25.55 33.55 26 33 26 C 32.45 26 32 25.55 32 25 L 32 16 C 32 15.45 32.45 15 33 15 z M 18 16 L 23 16 C 23.36 16 23.700859 16.199531 23.880859 16.519531 C 24.050859 16.829531 24.039609 17.219297 23.849609 17.529297 L 19.800781 24 L 23 24 C 23.55 24 24 24.45 24 25 C 24 25.55 23.55 26 23 26 L 18 26 C 17.64 26 17.299141 25.800469 17.119141 25.480469 C 16.949141 25.170469 16.960391 24.780703 17.150391 24.470703 L 21.199219 18 L 18 18 C 17.45 18 17 17.55 17 17 C 17 16.45 17.45 16 18 16 z M 27.5 19 C 28.11 19 28.679453 19.169219 29.189453 19.449219 C 29.369453 19.189219 29.65 19 30 19 C 30.55 19 31 19.45 31 20 L 31 25 C 31 25.55 30.55 26 30 26 C 29.65 26 29.369453 25.810781 29.189453 25.550781 C 28.679453 25.830781 28.11 26 27.5 26 C 25.57 26 24 24.43 24 22.5 C 24 20.57 25.57 19 27.5 19 z M 38.5 19 C 40.43 19 42 20.57 42 22.5 C 42 24.43 40.43 26 38.5 26 C 36.57 26 35 24.43 35 22.5 C 35 20.57 36.57 19 38.5 19 z M 27.5 21 C 27.39625 21 27.29502 21.011309 27.197266 21.03125 C 27.001758 21.071133 26.819727 21.148164 26.660156 21.255859 C 26.500586 21.363555 26.363555 21.500586 26.255859 21.660156 C 26.148164 21.819727 26.071133 22.001758 26.03125 22.197266 C 26.011309 22.29502 26 22.39625 26 22.5 C 26 22.60375 26.011309 22.70498 26.03125 22.802734 C 26.051191 22.900488 26.079297 22.994219 26.117188 23.083984 C 26.155078 23.17375 26.202012 23.260059 26.255859 23.339844 C 26.309707 23.419629 26.371641 23.492734 26.439453 23.560547 C 26.507266 23.628359 26.580371 23.690293 26.660156 23.744141 C 26.819727 23.851836 27.001758 23.928867 27.197266 23.96875 C 27.29502 23.988691 27.39625 24 27.5 24 C 27.60375 24 27.70498 23.988691 27.802734 23.96875 C 28.487012 23.82916 29 23.22625 29 22.5 C 29 21.67 28.33 21 27.5 21 z M 38.5 21 C 38.39625 21 38.29502 21.011309 38.197266 21.03125 C 38.099512 21.051191 38.005781 21.079297 37.916016 21.117188 C 37.82625 21.155078 37.739941 21.202012 37.660156 21.255859 C 37.580371 21.309707 37.507266 21.371641 37.439453 21.439453 C 37.303828 21.575078 37.192969 21.736484 37.117188 21.916016 C 37.079297 22.005781 37.051191 22.099512 37.03125 22.197266 C 37.011309 22.29502 37 22.39625 37 22.5 C 37 22.60375 37.011309 22.70498 37.03125 22.802734 C 37.051191 22.900488 37.079297 22.994219 37.117188 23.083984 C 37.155078 23.17375 37.202012 23.260059 37.255859 23.339844 C 37.309707 23.419629 37.371641 23.492734 37.439453 23.560547 C 37.507266 23.628359 37.580371 23.690293 37.660156 23.744141 C 37.739941 23.797988 37.82625 23.844922 37.916016 23.882812 C 38.005781 23.920703 38.099512 23.948809 38.197266 23.96875 C 38.29502 23.988691 38.39625 24 38.5 24 C 38.60375 24 38.70498 23.988691 38.802734 23.96875 C 39.487012 23.82916 40 23.22625 40 22.5 C 40 21.67 39.33 21 38.5 21 z"><\/path><\/svg>',c(u,"click",()=>{var n="https://zalo.me/"+i.identity.replace("https://zalo.me/","")+"?ref="+e();window.open(n);s("EzCa Zalo","Zalo Click")}),setTimeout(()=>{var t=document.getElementsByClassName("fb_dialog");t.length>0&&t[0].getAttribute("alignment")=="right"&&(at(u.id),setTimeout(()=>{u.style.right="",u.style.left=n.mobile?"20px":"24px",lt(u.id)},600))},6e3));return}function st(n,t,i,r){var u,f=n.getElementsByTagName(t)[0];n.getElementById(i)||(u=n.createElement(t),u.id=i,u.src=r,i==="ezca-tawkto-sdk"&&(u.async=!0,u.charset="UTF-8",u.setAttribute("crossorigin","*")),f.parentNode.insertBefore(u,f))}function ni(n,t){return Array.prototype.slice.call(document.getElementsByTagName(t)).filter(t=>t.textContent.trim()===n.trim())}function gi(n){try{return document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(t){return null}}function ti(n,t){n.parentNode.insertBefore(t,n.nextSibling)}function nr(n,t){n.parentNode.insertBefore(t,n)}function c(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function tr(){var n=document.documentElement,t=document.body,i="scrollTop",r="scrollHeight";return(n[i]||t[i])/((n[r]||t[r])-n.clientHeight)*100}function y(){var t="";return n.isHaravan?t=window.meta?window.meta.page.pageType:window.template:n.isCafe24&&(t=document.location.pathname.includes("/product/")?"product":""),t}function ht(t){if(!n.data.website.features)return 1;var i=n.data.website.features.find(n=>n.name==t);return i?i.planId:1}function ir(){n.data.integrationss&&n.data.integrationss.forEach(t=>{switch(t.type){case 2:ki(t);break;case 3:bi(t);break;case 4:di(t,n.data.integrationss.findIndex(n=>n.type==2)!=-1)}})}function ii(){var f,s,h,i,c,l;if(n.data.recommender&&n.data.recommender.active){var u=n.data.recommender,e=u.xPath.split("|"),r="",o=!1;for(f=0;f<e.length;f++)if(r=gi(e[f]),r){o=!0;break}if(!o){ct<10&&(ct++,setTimeout(function(){ii()},1e3));return}(s=["index","home","product","article"],h=y(),s.includes(h))&&(i=document.createElement("iframe"),i.id=n.recommId,c={id:u.id,webId:n.wid,dh:document.location.hostname,currentId:n.currentPId?n.currentPId+"":document.location.pathname,recent:dt(),productId:n.pId?n.pId:0,planId:ht("ProductRecommend")},i.src=n.engageUrl+"/recommender/"+encodeURIComponent(JSON.stringify(c)),l=t("width","100%")+t("border","0"),i.style=l,u.insert==="after"?ti(r,i):u.insert==="before"?nr(r,i):r.appendChild(i),n.iframeIds.push(i.id))}}function rr(n){var i,r,u;if(!n){i=document.getElementById("ezca-product-reviews");i&&i.remove();return}if(r=".ezca-reviews-badge{display:flex!important;justify-content:center!important;margin:4px 0!important;}.ezca-reviews-badge div{width:20px!important;height:20px!important;}.ezca-reviews-badge span{line-height:20px!important;margin-left:6px!important;}.ezca-star{background:url(https://cdn.ezca.asia/img/star.svg)no-repeat center center!important;}.ezca-star-half{background:url(https://cdn.ezca.asia/img/star-half.svg)no-repeat center center!important;}.ezca-star-empty{background:url(https://cdn.ezca.asia/img/star-empty.svg)no-repeat center center!important;}",r+=".ezca-reviews-lg-open{"+t("position","fixed")+t("top","0")+t("left","0")+t("height","100%")+t("z-index",tt)+"}",gt(r,"product-reviews-style"),u=document.getElementsByClassName("ezca-reviews-badge-empty"),u)for(badge of u)badge.innerHTML='<div class="ezca-star-empty"><\/div><div class="ezca-star-empty"><\/div><div class="ezca-star-empty"><\/div><div class="ezca-star-empty"><\/div><div class="ezca-star-empty"><\/div><span>(0)<\/span><\/div>',badge.classList.add("ezca-reviews-badge");y()==="product"&&ri()}function ri(){var i,r;if(n.isHaravan){if(i=document.getElementById("ezca-product-reviews"),!i){setTimeout(ri,5e3);return}if(i.tagName!="DIV"){const t=document.getElementById("wrap_ezca-product-reviews");let u=`{
                      "@context": "https://schema.org/",
                      "@type": "Product",
                      "name": "${t.getAttribute("data-title")}",
                      "image": "${t.getAttribute("data-img")}",
                      "review": {
                        "@type": "Review",
                        "reviewRating": {
                          "@type": "Rating",
                          "ratingValue": "5",
                          "bestRating": "5"
                        },
                        "author": {
                          "@type": "Person",
                          "name": "Customer"
                        }
                      },
                      "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "5",
                        "reviewCount": "1"
                      }
                    }`;if(typeof initEzCaReviews=="function"){initEzCaReviews();const n=ot(dataEncode);if(n.data&&n.data.productReviewExt.countRating>0){const i=n.data.productReviewExt.productReviews[0];u=`{
                      "@context": "https://schema.org/",
                      "@type": "Product",
                      "name": "${t.getAttribute("data-title")}",
                      "image": "${t.getAttribute("data-img")}",
                      "review": {
                        "@type": "Review",
                        "name": "${i.title}",
                        "reviewBody": "${i.content}",
                        "reviewRating": {
                          "@type": "Rating",
                          "ratingValue": "${i.rating}",
                          "bestRating": "5"
                        },
                        "author": {
                          "@type": "Person",
                          "name": "${i.name}"
                        }
                      },
                      "aggregateRating": {
                        "@type": "AggregateRating",
                        "ratingValue": "${n.data.productReviewExt.averageRating}",
                        "reviewCount": "${n.data.productReviewExt.countRating}"
                      }
                    }`}}const r=document.createElement("script");r.setAttribute("type","application/ld+json");r.textContent=u;document.head.appendChild(r);n.data.productReviewConfig.planId=ht("ProductReviews");i.contentWindow.postMessage({type:"product-reviews",key:"setConfig",value:n.data.productReviewConfig},n.engageUrl);n.iframeIds.push(i.id);return}if(!window.meta)return;r=`${n.apiUrl}/api/ProductReview/InitProductReview/${n.wid}/${window.meta.product.id}`;fetch(r,{method:"POST"}).then(n=>n.json()).then(()=>{})}else if(n.isCafe24){const r=document.getElementById("wrap_ezca-product-reviews"),i=document.createElement("iframe");i.id="ezca-product-reviews";i.src=`https://engage.ezca.asia/product-reviews/${r.getAttribute("data-id")}/${n.wid}`;const u=t("width","100%")+t("border","0px")+t("min-height","250px");i.style=u;r.appendChild(i)}}function ur(){var i,r,o,f,e,u;n.data.socialProof&&(i=n.data.socialProof,i.position=n.mobile?i.mobilePosition:i.desktopPosition,r=document.createElement("iframe"),r.id=n.socialProofId,o=n.data.website.features,f={webId:n.wid,dh:document.location.hostname,id:r.id,displayTime:i.displayTime,waitTime:i.waitTime,planId:ht("SocialProof")},r.src=n.engageUrl+"/social-proof/"+encodeURIComponent(JSON.stringify(f)),e=t("width",n.mobile?"calc(100% - 16px)":"400px")+t("position","fixed")+t(i.position.includes("right")?"right":"left",n.mobile?"8px":"16px")+t(i.position.includes("bottom")?"bottom":"top","-200px")+t("z-index","2147483647")+t("transition","all 600ms")+t("border","0"),r.style=e,u=[],i.rounded&&u.push("ezca-rounded"),i.boxShadow&&u.push("ezca-box-shadow"),u.length>0&&(r.className=u.join(" ")),setTimeout(()=>{document.body.appendChild(r)},i.startDelayTime*1e3),n.iframeIds.push(r.id))}function fr(i){var u,r,f;if(n.data.socialProof&&n.data.socialProof.boostViewingActive&&window.meta&&(i+=Math.floor(Math.random()*n.data.socialProof.boostViewing)-1,!(i<=0))&&(u=ni(window.meta.product.title,"h1"),u.length==0&&ni(window.meta.product.title,"div"),u.length>0)){if(r=document.getElementById("ezca-viewing"),r){if(f=r.getAttribute("x-count"),i<=parseInt(f))return}else r=document.createElement("div"),r.id="ezca-viewing",r.setAttribute("x-count",i),styles=t("font-size","14px")+t("padding","8px")+t("margin-bottom","8px")+t("border","1px solid #ccc")+t("border-radius","8px")+t("width","fit-content")+"",r.style=styles;r.innerHTML=`<img src="https://cdn.ezca.asia/img/users.svg" style="width: 24px;margin-right: 4px;" />
                                 <b>Bạn</b> và <b>${i}</b> người khác đang xem sản phẩm này`;ti(u[0],r)}}function a(t,i){if(n.logicData[t]=i,typeof jsonLogic=="object")try{ui(t,"popup");ui(t,"wheel-fortune")}catch(r){console.log("Error in setLogicData: ",r)}}function ui(t,i){var f=i=="popup"?n.data.forms:n.data.wheelFortunes,e,s,o,c,a;if(f&&f.length!=0&&n.isActiveTab){e=f.filter(t=>!n.popupOpens.includes(t.id));for(s in e){var u=e[s],h=`${i}_${u.id}`,r=sessionStorage.getItem(h);r=r?parseInt(r):0;o=JSON.parse(u.jsonLogic);o.data.hasOwnProperty(t)&&typeof jsonLogic.apply=="function"&&(n.logicData.countShow=r,c=jsonLogic.apply(o.logic,n.logicData),a=l("hide_"+u.id),c&&!a&&(r++,sessionStorage.setItem(h,r),n.popupOpens.push(u.id),or(u,i)))}}}function er(){var i,t;c(document,"mouseout",function(n){n=n?n:window.event;var t=n.relatedTarget||n.toElement;t&&t.nodeName!="HTML"||a("exitPage",!0)});c(window,"scroll",function(){i&&clearTimeout(i);i=setTimeout(()=>{a("scrollPage",tr())},300)});t=document.createElement("style");t.id="ezcaPopupCustomCss";t.innerHTML=".ezca-popup-ontop{top:0!important;}";document.head.appendChild(t);c(window,"resize",function(){var i,t;if(n.mobile&&b.width==window.innerWidth)if(b.height>window.innerHeight)for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.add("ezca-popup-ontop");else for(i=document.getElementsByClassName("ezca-popup"),t=0;t<i.length;t++)i[t].classList.remove("ezca-popup-ontop");b.width=window.innerWidth;b.height=window.innerHeight});c(document,"visibilitychange",function(){n.isActiveTab=document.visibilityState==="visible"})}function or(i,r){var e=i.id,o,h,f,u,s;return document.getElementById(e)?(console.log("exists popup",e),!1):(o=n.data.device==1,h=[3],h.includes(i.type)||r=="wheel-fortune"?(f=document.createElement("div"),f.id="wrap_"+e,s=t("width","100%")+t("height","100%")+t("position","fixed")+t("top","0")+t("left","0")+t("background","#00000080")+t("display","flex")+t("justify-content","center")+t("align-items","center")+t("visibility","hidden")+t("z-index","2147483647")+"",f.style=s,f.setAttribute("x-display","flex"),document.body.appendChild(f),u=document.createElement("iframe"),u.id=e,u.src=`${n.engageUrl}/${r}/${e}`,s=t("width","100%")+t("max-width",o?"100%":"1024px")+t("max-height",o?"100%":"1024px")+t("border","0"),u.style=s,document.getElementById(f.id).appendChild(u),setTimeout(()=>{lt(f.id)},1e3),c(f,"click",function(){at(f.id)}),n.iframeIds.push(u.id)):(u=document.createElement("iframe"),u.id=e,u.className="ezca-popup",u.src=`${n.engageUrl}/${r}/${e}`,s=t("width",o?"100%":"480px")+t("position","fixed")+t("bottom",o?"0":"16px")+t("right",o?"0":"16px")+t("visibility","hidden")+t("z-index","2147483647")+t("border","0"),u.style=s,document.body.appendChild(u),setTimeout(()=>{lt(e)},1e3),n.iframeIds.push(u.id)),!0)}function sr(){et(n.cdnUrl+"/js/logic.js","logic").then(()=>{er(),a("url",document.location.href),a("referrer",document.referrer)})}function s(t,i,r){var f,e;r=r?r:"";f=ft();f.t="interactive";f.ec=t;f.ea=i;f.el=r;n.data.integrationss&&(e=n.data.integrationss.find(n=>n.type===1&&n.active),e&&(f.tid=e.identity));!n.preview&&u&&u.emit("event",f)}function lt(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&hr(t)}function at(n){var t=document.getElementById("wrap_"+n);t||(t=document.getElementById(n));t&&cr(t);g("hide_"+n,!0,1/288)}function hr(n,t){if(n)if(t=t?t:300,n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display=n.getAttribute("x-display")?n.getAttribute("x-display"):"block",n.style.visibility="visible",t)var i=0,r=setInterval(function(){i+=50/t;i>=1&&(clearInterval(r),i=1);n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=1,n.style.filter="alpha(opacity=1)"}function cr(n,t){if(n)if(t=t?t:300,t)var i=1,r=setInterval(function(){i-=50/t;i<=0&&(clearInterval(r),i=0,n.style.display="none",n.style.visibility="hidden");n.style.opacity=i;n.style.filter="alpha(opacity="+i*100+")"},50);else n.style.opacity=0,n.style.filter="alpha(opacity=0)",n.style.display="none",n.style.visibility="hidden"}function fi(t){let i={clientEventId:it(),eventName:t,pageTitle:document.title,url:document.location.toString(),referral:document.referrer,userId:e(),websiteId:n.wid};return i.firstView=n.firstView,n.isHaravan&&window.meta&&(i.details={resourceType:window.meta.page.pageType||window.meta.page.resourceType,resourceId:window.meta.page.resourceId||0}),i}function lr(){function i(t,i,r){var u=document.getElementById(t);u&&u.contentWindow.postMessage({type:r,key:"setData",value:i},n.engageUrl)}function r(n,t){var i=document.getElementById(n);i&&(i.style.height=t+"px")}function u(){var i=t("z-index","2147483647")+t("position","fixed")+t("border","0"),r=n.data.menu.menuTemplates.find(t=>t.device===n.data.device),f;["top","right","bottom","left"].forEach(n=>{i+=r.position.includes(n)?t(n,"0"):""});r.position.includes("middle")&&(i+=t("top","50%"),i+=t("transform","translateY(-50%)"));var u=r.position.includes("center");return u&&(i+=t("right","50%"),i+=t("transform","translateX(50%)")),f=56*n.data.menu.menuButtons.length+16,i+=t("width",u?"100%":"64px")+t("height",(u?"60":f)+"px")}function f(){var t,i;(n.data.menu&&n.data.menu.active||n.preview)&&(t=document.getElementById(n.rootId),t&&t.remove(),t=document.createElement("div"),t.id=n.rootId,i=document.createElement("iframe"),i.id=n.menuId,i.src=n.engageUrl+"/menu",i.style=u(),t.appendChild(i),document.body.appendChild(t))}var o,h;if(gt(".ezca-rounded{border-radius:10px!important;}.ezca-box-shadow{box-shadow:rgba(0,0,0,0.6) 0 0 5px!important;}","ezca-custom-style"),window.addEventListener("message",t=>{var o,p,w,a,v,b,y,c,d,g,l,h;try{if(o=t.data,p={uid:e(),wid:k(),location:document.location.toString(),dh:document.location.hostname,isMobile:n&&n.data&&n.data.device==1},o.type=="popup"||o.type=="form"||o.type=="wheel-fortune"){w=o.type=="wheel-fortune";switch(o.key){case"getData":if(a=w?n.data.wheelFortunes:n.data.forms,!a||a.length==0)return;v=a.find(n=>n.id==o.value.id);v.parent=p;i(v.id,v,o.type);break;case"updateHeight":b=n.data.device==1;y=Math.min(screen.height,o.value.height);w&&b&&(y=screen.height);r(o.value.id,y);b&&(c=document.getElementById(o.value.id),c&&(c.style.top=(screen.height-y)/2+"px"));break;case"close":at(o.value.id)}}else if(o.type=="product-reviews")switch(o.key){case"updateHeight":r("ezca-product-reviews",o.value.height);break;case"toggle-lg":document.getElementById("ezca-product-reviews").classList.toggle("ezca-reviews-lg-open");break;default:console.log(o)}else if(o.type=="recommender")switch(o.key){case"updateHeight":r(n.recommId,o.value.height);break;default:console.log(o)}else if(o.type=="social-proof"){c=document.getElementById(o.value.id);switch(o.key){case"updateHeight":r(n.socialProofId,o.value.height);break;case"close":d="-200px";n.data.socialProof.position.includes("bottom")?c.style.bottom=d:c.style.top=d;break;case"open":h=o.value.item;n.isHaravan?(h.link=`${window.location.origin}/products/${h.link}`,i(n.socialProofId,h,o.type)):n.isSapo&&(h.link=`${window.location.origin}/${h.link}`,i(n.socialProofId,h,o.type));setTimeout(function(){var t=n.mobile?"8px":"16px";n.data.socialProof.position.includes("bottom")?c.style.bottom=t:c.style.top=t},600);break;case"goto":window.location.replace(window.location.origin+o.value.link);break;default:console.log(o)}}else{o.type="menu";switch(o.key){case"getData":l=n.data.menu;l.parent=p;i(n.menuId,l,o.type);break;case"setDataFromApp":n.data||(n.data={});g=o.value;n.data.menu=o.value;n.data.device=g.parent.isMobile?1:2;document.getElementById(n.menuId)?(l=document.getElementById(n.menuId),l.style=u()):f();i(n.menuId,g,o.type);break;case"click":h=o.value;s("EzCa Menu",h.eventName,n.data.device==1?h.shortName:h.name);h.action===1?window.open(h.actionValue):h.action===1?window.open(h.actionValue,"_blank"):eval(h.actionValue)}}}catch(nt){console.log("Error in receive message: ",nt)}}),!n.preview){n.pageViewEventId=it();o=`${n.apiUrl}/api/public/website/${n.wid}`;h=y()==="product"&&window.meta;let c=fi("page_view");c.clientEventId=n.pageViewEventId;fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(n=>n.json()).then(t=>{t.success&&(n.disabledTracking.includes(k())||ar(),wi(h?window.meta.product.id:0),n.data=t.data,n.mobile=n.data.device==1,f(),ir(),ii(),ur(),rr(n.data.productReviewConfig!=null),(n.data.forms&&n.data.forms.length>0||n.data.wheelFortunes&&n.data.wheelFortunes.length>0)&&sr(),vr())})}}function ei(n){var t={};for(d in n)n.hasOwnProperty(d)&&(t[d.replace(/(\_\w)/g,function(n){return n[1].toUpperCase()})]=n[d]);return t}function v(t,r){try{let u=fi(t);if(r.eventId=u.clientEventId,r.send_to=n.measurement_id,ezcaAnalytics("event",t,r),delete r.eventId,delete r.send_to,r=ei(r),r.hasOwnProperty("items"))for(i in r.items)r.items[i]=ei(r.items[i]),r.items[i].hasOwnProperty("price")&&(r.items[i].price=parseInt(r.items[i].price)/100);u.details&&Object.keys(r).forEach(function(n){u.details[n]=r[n]});const f=`${n.apiUrl}/api/public/Event`;fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then(()=>{})}catch(u){console.error(u)}}function ar(){try{let t=document.createElement("script");t.type="text/javascript";t.setAttribute("async","true");t.setAttribute("src","https://www.googletagmanager.com/gtag/js?id=G-SD7NHQVGFB");document.head.appendChild(t);const i="G-SD7NHQVGFB";n.measurement_id=i;t=document.createElement("script");t.innerHTML=`window.dataLayer = window.dataLayer || [];
                                function ezcaAnalytics(){dataLayer.push(arguments);}
                                ezcaAnalytics('js', new Date());
                                ezcaAnalytics('config', '${i}', {
                                    'cookie_prefix': '_ezca',
                                    'eventId': ${n.pageViewEventId},
                                    'clientId': ${e()},                                    
                                    'webId': '${n.wid}'
                                });`;document.head.appendChild(t);const u=XMLHttpRequest.prototype.open;if(XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){try{const n=new URL(this.responseURL.toLowerCase());if(this.readyState==4){const t=JSON.parse(this.response);switch(n.pathname){case"/cart/add.js":v("add_to_cart",{currency:"VND",value:t.price,items:[{item_id:t.product_id,item_name:t.product_title,price:t.price,quantity:t.quantity,item_brand:t.vendor,item_variant:t.variant_id,index:0}]})}}}catch(n){}});u.apply(this,arguments)},window.meta&&window.meta.page)switch(window.meta.page.pageType){case"cart":fetch("/cart.js").then(n=>n.json()).then(n=>{let t=n.items.map((n,t)=>({item_id:n.product_id,item_name:n.product_title,price:n.price,quantity:n.quantity,item_brand:n.vendor,item_variant:n.variant_id,index:t}));v("view_cart",{currency:"VND",value:n.total_price,items:t})});break;case"product":const n=window.meta.product;v("view_item",{items:[{item_id:n.id,item_name:n.title,price:n.price,item_brand:n.vendor}]});break;case"collection":if(!window.meta.page.resourceType)break;v("view_item_list",{item_list_id:window.meta.page.resourceId,item_list_name:document.location.pathname.replace("/collections/","")});break;case"searchresults":v("search",{search_term:f("q")})}const r=document.getElementsByName("q");r.length>0&&r.forEach(n=>{c(n,"keydown",function(n){nt&&clearTimeout(nt);nt=setTimeout(function(){v("search",{search_term:n.target.value});nt=null},1200)})})}catch(t){}}function vr(){const t=f("ezca_pr"),i=n.data.socialProof||n.data.recommender;if(t&&i){const r=ot(t),u=`${n.apiUrl}/api/public/UpdateCount/${i.id}`;fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:r.source,countClick:!0})})}}var w={v:"2022.10.20.01"},tt=2147483647,r=sessionStorage,pt=localStorage,h=n=>{let t="",i=crypto.getRandomValues(new Uint8Array(n));for(;n--;){let r=63&i[n];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t},b={width:window.innerWidth,height:window.innerHeight},o={isDev:function(){return!n.scriptSrc.includes("cdn")},isProd:function(){return n.scriptSrc.includes("https://cdn")},isBeta:function(){return n.scriptSrc.includes("https://betacdn")}},n={ezcaKey:"_ezca",uidKey:"__ezca_uid",newVisitorKey:"__ezca_new_visitor",sidKey:"__ezca_sid",tipKey:"__ezca_tip",tisKey:"__ezca_tis",pisKey:"__ezca_pis",actKey:"__ezca_activity",pvidKey:"__ezca_pvid",recentIdsKey:"__ezca_recent_ids",connectCount:0,productViewLog:null,currentPId:encodeURIComponent(window.location.pathname),logicData:{url:document.location.href,referrer:document.referrer},popupOpens:[],iframeIds:[],isActiveTab:!0,disabledTracking:["6231a3f3527397e49161665d"]},et,u,ct,nt,p,oi,vt,yt;n.isCafe24=typeof CAFE24!="undefined";n.isHaravan=typeof Haravan!="undefined";n.isSapo=typeof Bizweb!="undefined";n.isWooCommerce=document.querySelector("body.woocommerce");n.isECommerce=n.isCafe24||n.isHaravan||n.isSapo||n.isWooCommerce;n.wid=k()?k():document.location.hostname;n.apiUrl=o.isProd()?"https://api.ezca.asia":o.isBeta()?"https://betaapi.ezca.asia":"https://localhost:44341";n.wssUrl=o.isProd()?"https://wss.ezca.asia":o.isBeta()?"https://wss.ezca.asia":"http://localhost:8000";n.cdnUrl=o.isProd()?"https://cdn.ezca.asia":o.isBeta()?"https://betacdn.ezca.asia":"http://cors.com";n.engageUrl=o.isProd()?"https://engage.ezca.asia":o.isBeta()?"https://betaengage.ezca.asia":"http://localhost:3001";n.preview=window.location.origin===n.engageUrl;n.rootId=n.preview?"ezca-root":h(16);n.menuId=n.preview?"ezca-menu":h(16);n.recommId=n.preview?"ezca-recommender":h(16);n.socialProofId=n.preview?"ezca-social-proof":h(16);et=(n,t)=>{if(t="ezca-"+t,!document.getElementById(t))return new Promise((i,r)=>{const u=document.createElement("script");u.type="text/javascript";u.onload=i;u.onerror=r;u.src=n;u.id=t;document.head.append(u)})};ct=0;try{if(p=f("ezcaVerifyInstall"),p&&console.log("Start VerifyInstall"),window.opener&&n.wid==p){oi=n.apiUrl+"/api/public/VerifyInstall?"+li({id:p,url:document.location.origin});hi(oi,function(){p&&console.log("VerifyInstall Success")});return}if(console.log(`EzCa SDK is installed with ${n.wid}, v${w.v}.`),!n.preview)try{vt=function(){g(n.actKey,"true",1/48)};vt();document.addEventListener("mousemove",vt);kt(n.tipKey,!1);kt(n.tisKey,!0);ai(n.pisKey)}catch(si){console.error(si)}yt=function(){vi();lr()};n.isHaravan&&y()==="product"&&!window.meta?Haravan.getProduct(document.location.pathname.replace("/products/",""),function(n){console.log("Init meta success");window.meta={page:{pageType:"product",resourceType:"product",resourceId:n.id},product:n};yt()}):yt()}catch(si){console.error(si)}return w}();